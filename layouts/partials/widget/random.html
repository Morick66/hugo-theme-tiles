<div class="random-posts widget--card">
    <h2>ğŸ“„ éšæœºæ–‡ç« </h2>
    <button id="random-btn" onclick="loadRandomPosts()" class="">
        {{ partial "helper/icon" "refresh" }}
    </button>
    <div id="random-posts"></div>
</div>

<script>
    function loadRandomPosts() {
        const btn = document.getElementById('random-btn');
        btn.classList.add('rotate');  // æ·»åŠ æ—‹è½¬ç±»
        btn.addEventListener('animationend', function() {
            btn.classList.remove('rotate');  // åŠ¨ç”»ç»“æŸåç§»é™¤æ—‹è½¬ç±»
        });
        fetch('/random.json')  // ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ JSON æ–‡ä»¶è·¯å¾„
            .then(response => response.json())
            .then(data => {
                const postsContainer = document.getElementById('random-posts');
                postsContainer.innerHTML = ''; // æ¸…ç©ºç°æœ‰çš„æ–‡ç« åˆ—è¡¨
                const shuffled = data.articles.sort(() => 0.5 - Math.random()); // éšæœºæ’åº
                shuffled.slice(0, 5).forEach(post => { // é€‰æ‹©å‰5ç¯‡æ–‡ç« 
                    const postElement = document.createElement('div');
                    postElement.innerHTML = `
                    <a href="${post.url}">
                        <div class="random-post">
                            <div class="random-post-img">
                                <img src="${post.image}" alt="${post.title}">
                            </div>
                            <div class="random-post-content">
                                <h3>${post.title}</h3>
                                <p>${new Date(post.date).toLocaleDateString()}</p>
                            </div>
                        </div>
                    </a>
                    `;
                    postsContainer.appendChild(postElement);
                });
            });
    }
    
    // åˆå§‹åŠ è½½
    loadRandomPosts();
    </script>
    